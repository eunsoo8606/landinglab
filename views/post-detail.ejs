<%- include('layout/head') %>

<!-- SEO 메타 태그 -->
<meta name="description" content="<%= post.description %>">
<meta name="keywords" content="<%= post.tags.join(', ').replace(/#/g, '') %>">
<meta name="author" content="<%= post.author %>">

<!-- Open Graph 태그 -->
<meta property="og:title" content="<%= post.title %> | 랜딩랩">
<meta property="og:description" content="<%= post.description %>">
<meta property="og:image" content="<%= post.image %>">
<meta property="og:type" content="article">
<meta property="og:url" content="https://landinglab.kr/posts/<%= post.id %>">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="<%= post.title %>">
<meta name="twitter:description" content="<%= post.description %>">
<meta name="twitter:image" content="<%= post.image %>">

<!-- Structured Data (Article Schema) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "<%= post.title %>",
  "image": "<%= post.image %>",
  "author": {
    "@type": "Organization",
    "name": "<%= post.author %>"
  },
  "publisher": {
    "@type": "Organization",
    "name": "랜딩랩",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/logo-1x.webp"
    }
  },
  "datePublished": "<%= post.date %>",
  "description": "<%= post.description %>"
}
</script>

<%- include('layout/header') %>

<main class="post-detail-page">
  <!-- 스크롤 진행 바 -->
  <div class="scroll-progress-bar" id="scrollProgress"></div>

  <!-- 히어로 섹션 -->
  <section class="post-hero" style="background-image: url('<%= post.image %>');">
    <div class="hero-overlay"></div>
    <div class="container">
      <div class="hero-content">
        <span class="post-category-badge"><%= post.category %></span>
        <h1 class="post-hero-title"><%= post.title %></h1>
        <div class="post-meta">
          <span class="meta-item">
            <i class="fas fa-user"></i> <%= post.author %>
          </span>
          <span class="meta-item">
            <i class="fas fa-calendar"></i> <%= post.date %>
          </span>
          <span class="meta-item">
            <i class="fas fa-clock"></i> <%= post.readTime %>
          </span>
        </div>
        <div class="post-tags-hero">
          <% post.tags.forEach(tag => { %>
            <span class="tag-hero"><%= tag %></span>
          <% }); %>
        </div>
      </div>
    </div>
  </section>

  <!-- 콘텐츠 섹션 -->
  <section class="post-content-section">
    <div class="container">
      <div class="content-wrapper">
        <!-- 메인 콘텐츠 -->
        <article class="post-main-content">
          <div class="content-body">
            <%- post.content %>
          </div>

          <!-- 소셜 공유 버튼 -->
          <div class="social-share">
            <h4>이 글을 공유하세요</h4>
            <div class="share-buttons">
              <button class="share-btn facebook" onclick="shareOnFacebook()">
                <i class="fab fa-facebook-f"></i> Facebook
              </button>
              <button class="share-btn twitter" onclick="shareOnTwitter()">
                <i class="fab fa-twitter"></i> Twitter
              </button>
              <button class="share-btn linkedin" onclick="shareOnLinkedIn()">
                <i class="fab fa-linkedin-in"></i> LinkedIn
              </button>
              <button class="share-btn link" onclick="copyLink()">
                <i class="fas fa-link"></i> 링크 복사
              </button>
            </div>
          </div>
        </article>

        <!-- 사이드바 (목차) -->
        <aside class="post-sidebar">
          <div class="sidebar-sticky">
            <h3>목차</h3>
            <nav class="table-of-contents" id="toc">
              <!-- JavaScript로 자동 생성 -->
            </nav>
          </div>
        </aside>
      </div>
    </div>
  </section>

  <!-- 관련 포스트 섹션 -->
  <% if (relatedPosts && relatedPosts.length > 0) { %>
  <section class="related-posts-section">
    <div class="container">
      <h2 class="section-title">관련 포스트</h2>
      <div class="related-posts-grid">
        <% relatedPosts.forEach(relatedPost => { %>
          <article class="related-post-card" onclick="location.href='/posts/<%= relatedPost.id %>'">
            <div class="related-post-image" style="background-image: url('<%= relatedPost.image %>');"></div>
            <div class="related-post-content">
              <span class="related-post-category"><%= relatedPost.category %></span>
              <h3 class="related-post-title"><%= relatedPost.title %></h3>
              <p class="related-post-description"><%= relatedPost.description %></p>
              <div class="related-post-meta">
                <span><i class="fas fa-clock"></i> <%= relatedPost.readTime %></span>
              </div>
            </div>
          </article>
        <% }); %>
      </div>
    </div>
  </section>
  <% } %>

  <!-- CTA 섹션 -->
  <section class="post-cta-section">
    <div class="container">
      <div class="cta-content">
        <h2>프로젝트를 시작할 준비가 되셨나요?</h2>
        <p>전문가와 함께 성공적인 웹사이트를 만들어보세요</p>
        <a href="/contact" class="btn-primary-solid page-transition">무료 상담 신청하기</a>
      </div>
    </div>
  </section>
</main>

<!-- 포스트 상세 페이지 전용 스타일 -->
<link rel="stylesheet" href="/css/post-detail.css">

<!-- 포스트 상세 페이지 전용 스크립트 -->
<script>
  // 포스트 데이터를 JavaScript로 전달
  window.postData = {
    title: '<%= post.title %>',
    url: window.location.href
  };
</script>
<script src="/js/post-detail.js"></script>

<%- include('layout/footer') %>
